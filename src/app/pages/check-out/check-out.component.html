<div style="height: 60px;"></div>
<div style="width: 100%; max-width: 1840px; padding-left: 60px; padding-right: 60px;">
    <div class="row">
        <div class="col-12 text-center">
            <h2 style="font-weight: 900;">Оформлення замовлення</h2>
        </div>
    </div>
    <form class="checkout-form">
        <div class="row">
            <div class="col-6">
                <div class="form delivery-form">
                    <div class="form-group">
                        <div class="h5 form-title"><b>1.</b> Контактні дані</div>
                        <!--  -->
                        <form [formGroup]="contacts">
                            <div class="row">
                                <div class="col-6">
                                    <input type="text" formControlName="name" name="first_name" class="input required"
                                        (input)="contactsAdd()" [ngClass]="{'invalid': contacts.get('name')?.invalid}"
                                        placeholder="*Вашe ім’я">
                                </div>
                                <div class="col-6">
                                    <input type="text" formControlName="sname" name="last_name" class="input required "
                                        (input)="contactsAdd()" [ngClass]="{'invalid': contacts.get('sname')?.invalid}"
                                        placeholder="*Вашe прізвище">
                                </div>
                                <div class="col-12">
                                    <input class="input inputmask required" name="phone" type="text" value=""
                                        [ngClass]="{'invalid': contacts.get('phone')?.invalid}"
                                        [imask]="{mask: '{+38}(000)000-00-00'}" [unmask]="false" formControlName="phone"
                                        placeholder="Ваш телефон" (input)="contactsAdd()" inputmode="numeric">
                                </div>

                            </div>
                            <input type="email" name="email" class="input input-last" formControlName="email"
                                [ngClass]="{'invalid': contacts.get('email')?.invalid}"
                                placeholder="Email, щоб отримати копію замовлення">
                        </form>
                    </div>

                    <div class="form-group">
                        <div class="h5 form-title"><b>2.</b> Інформація про доставку</div>
                        <div class="checkbox-entry-wrap">
                            <label class="checkbox-entry">
                                <input id="driveDelivery" type="radio" name="delivery_method"
                                    class="toggle-block-control" data-min-amount="" data-discount-percent=""
                                    data-block="1" data-rel="4" checked="" value="courier">

                                <span>Доставка кур'єром </span>
                            </label>
                        </div>
                        <div class="toggle-blocks" style="margin-bottom: 20px;">
                            <div class="row">
                                <!--  -->
                                <form [formGroup]="adressForm">
                                    <div class="col-12">
                                        <select (change)="adressAdd()" formControlName="city" class="form-select input"
                                            aria-label="Default select example">
                                            <option disabled>Оберіть місто</option>
                                            <option value="Львів" selected>Львів</option>
                                            <option value="Брюховичі">Брюховичі</option>
                                            <option value="Великі грибовичі">Великі грибовичі</option>
                                        </select>
                                    </div>
                                    <div class="col-8">
                                        <input type="text" (input)="adressAdd()"
                                            [ngClass]="{'invalid': adressForm.get('street')?.invalid}"
                                            formControlName="street" placeholder="*Вулиця" class="input">
                                    </div>
                                    <div class="col-4">
                                        <input type="text" (input)="adressAdd()"
                                            [ngClass]="{'invalid': adressForm.get('buildNum')?.invalid}"
                                            formControlName="buildNum" placeholder="*№ Будинку" class="input">
                                    </div>
                                    <div class="col-3">
                                        <input class="input" (input)="adressAdd()" formControlName="enterNum"
                                            type="text" placeholder="*Під'їзд">
                                    </div>
                                    <div class="col-3">
                                        <input class="input" (input)="adressAdd()" formControlName="apartNum"
                                            type="text" placeholder="*Квартира">
                                    </div>
                                    <div class="col-3">
                                        <input class="input" (input)="adressAdd()" formControlName="floorNum"
                                            type="text" placeholder="*Поверх">
                                    </div>
                                    <div class="col-3">
                                        <input class="input" (input)="adressAdd()" formControlName="intercom"
                                            type="text" placeholder="*Домофон">
                                    </div>
                                </form>
                                <div class="col-12">
                                    <div class="checkbox-entry-wrap">
                                        <label class="checkbox-entry">
                                            <input type="checkbox" (change)="onTime()" class="toggle-block-control"
                                                data-block="4" data-rel="4" name="at_time">
                                            <span>На час</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="toggle-block wrapper_time_block" *ngIf="forTime">
                                    <div class="row">
                                        <div class="col-sm-6" style="position: relative;">
                                            <input type="text" 
                                            (input)="setTime()"
                                            class="input calendar" 
                                            matInput [matDatepicker]="picker"
                                                name="self_delivery_date" placeholder="Дата доставки"
                                                value="15.09.2023">
                                            <mat-datepicker-toggle style="position: absolute;
                                                right: 13px;
                                                top: 3px;" 
                                                matIconSuffix 
                                                [for]="picker"
                                            ></mat-datepicker-toggle>
                                            <mat-datepicker #picker></mat-datepicker>

                                        </div>
                                        <div class="col-sm-6">

                                            <select class="form-select input"
                                            (change)="setTime()"
                                            aria-label="Default select example">

                                                <option value="" selected="" disabled="">Виберіть часовий інтервал
                                                </option>
                                                <option value="14:27 - 14:37">14:27 - 14:37</option>
                                                <option value="14:37 - 14:47">14:37 - 14:47</option>
                                                <option value="14:47 - 14:57">14:47 - 14:57</option>
                                                <option value="14:57 - 15:07">14:57 - 15:07</option>
                                                <option value="15:07 - 15:17">15:07 - 15:17</option>
                                                <option value="15:17 - 15:27">15:17 - 15:27</option>
                                                <option value="15:27 - 15:37">15:27 - 15:37</option>
                                                <option value="15:37 - 15:47">15:37 - 15:47</option>
                                                <option value="15:47 - 15:57">15:47 - 15:57</option>
                                                <option value="15:57 - 16:07">15:57 - 16:07</option>
                                                <option value="16:07 - 16:17">16:07 - 16:17</option>
                                                <option value="16:17 - 16:27">16:17 - 16:27</option>
                                                <option value="16:27 - 16:37">16:27 - 16:37</option>
                                                <option value="16:37 - 16:47">16:37 - 16:47</option>
                                                <option value="16:47 - 16:57">16:47 - 16:57</option>
                                                <option value="16:57 - 17:07">16:57 - 17:07</option>
                                                <option value="17:07 - 17:17">17:07 - 17:17</option>
                                                <option value="17:17 - 17:27">17:17 - 17:27</option>
                                                <option value="17:27 - 17:37">17:27 - 17:37</option>
                                                <option value="17:37 - 17:47">17:37 - 17:47</option>
                                                <option value="17:47 - 17:57">17:47 - 17:57</option>
                                                <option value="17:57 - 18:07">17:57 - 18:07</option>
                                                <option value="18:07 - 18:17">18:07 - 18:17</option>
                                                <option value="18:17 - 18:27">18:17 - 18:27</option>
                                                <option value="18:27 - 18:37">18:27 - 18:37</option>
                                                <option value="18:37 - 18:47">18:37 - 18:47</option>
                                                <option value="18:47 - 18:57">18:47 - 18:57</option>
                                                <option value="18:57 - 19:07">18:57 - 19:07</option>
                                                <option value="19:07 - 19:17">19:07 - 19:17</option>
                                                <option value="19:17 - 19:27">19:17 - 19:27</option>
                                                <option value="19:27 - 19:37">19:27 - 19:37</option>
                                                <option value="19:37 - 19:47">19:37 - 19:47</option>
                                                <option value="19:47 - 19:57">19:47 - 19:57</option>
                                                <option value="19:57 - 20:07">19:57 - 20:07</option>
                                                <option value="20:07 - 20:17">20:07 - 20:17</option>
                                                <option value="20:17 - 20:27">20:17 - 20:27</option>
                                                <option value="20:27 - 20:37">20:27 - 20:37</option>
                                                <option value="20:37 - 20:47">20:37 - 20:47</option>
                                                <option value="20:47 - 20:57">20:47 - 20:57</option>
                                                <option value="20:57 - 21:07">20:57 - 21:07</option>
                                                <option value="21:07 - 21:17">21:07 - 21:17</option>
                                                <option value="21:17 - 21:27">21:17 - 21:27</option>
                                                <option value="21:27 - 21:37">21:27 - 21:37</option>
                                                <option value="21:37 - 21:47">21:37 - 21:47</option>
                                                <option value="21:47 - 21:57">21:47 - 21:57</option>
                                                <option value="21:57 - 22:07">21:57 - 22:07</option>
                                            </select>
                                        </div>

                                    </div>


                                </div>
                                <div
                                    style="height: 470px; display: flex; align-items: center; justify-content: center; font-size: 20px; font-weight: 900;">
                                    <gmp-map class="map-block" id="map" data-lat="49.834338" data-lng="23.984174"
                                        data-zoom="12"
                                        data-map-marker="https://www.tomatina.ua/wp-content/themes/tomatina/img/set-marker.png"
                                        data-default-green-zone="1" data-default-yellow-zone="1"
                                        data-default-red-zone="350" data-green-zone="300" data-yellow-zone="300"
                                        data-red-zone="500" data-green-zone-nomin-delivery-price="60"
                                        data-yellow-zone-nomin-delivery-price="60"
                                        data-red-zone-nomin-delivery-price="90" data-current-zone-type=""
                                        data-current-nomin-delivery-price="0" data-current-zone="0"
                                        style="position: relative; overflow: hidden;"
                                        center="49.8397102355957,24.029340744018555" zoom="14" map-id="DEMO_MAP_ID">

                                    </gmp-map>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-6">
                <form [formGroup]="order" (ngSubmit)="getOrder()">

                <div class="form delivery-form cabinet-form">
                    <div class="h5 content-title">Ваше замовлення</div>

                    <div class="checkout-products">

                        <div class="cart-product-wrapper" *ngFor="let prod of buscket">
                            <div class="prod_horiz cart-product js-product" data-sku="16872" data-price="179"
                                data-key="5c2ffa924cf18e041eeeb4d6e5ca51d9" data-id="80030"
                                data-cats="healthy &amp; tasty menu,Салати">
                                <a class="prod_horiz-img" [routerLink]="['/product/'+prod.category + '/' + prod.id]">
                                    <img class="img"  [src]="prod.imgPath">
                                </a>
                                <div class="prod_horiz-desc">
                                    <a class="title h5"
                                        href="https://www.tomatina.ua/product/pechenyj-baklazhan-z-syrom-tofu/">{{prod.name}}</a>

                                    <div class="product_additions"> {{prod.weight}} г</div>
                                    <div class="prod_horiz-controls">
                                        <div class="price_default">
                                            <b>{{prod.cost * prod.count}}</b> грн
                                        </div>
                                        <div class="thumb-input-number">
                                            <button type="button" class="decrement in-cart"
                                                (click)="productCount(prod, false)">-</button>
                                            <input class="product-qty" [value]="prod.count" readonly="" tabindex="-1"
                                                max="999">
                                            <button type="button" class="increment in-cart"
                                                (click)="productCount(prod, true)">+</button>
                                        </div>
                                    </div>
                                    <div class="price-wrap">
                                        <b class="price">{{prod.cost * prod.count}}</b>
                                        грн
                                    </div>
                                </div>
                                <button type="button" (click)="delProd(prod)" class="btn-close remove-product"
                                    data-key="5c2ffa924cf18e041eeeb4d6e5ca51d9"></button>
                            </div>

                        </div>


                        <div *ngIf="cutlNull" class="prod_horiz type2 js-checkout-product things" data-price="0">
                            <div class="prod_horiz-desc">
                                <div class="title h5">Прибори</div>
                                <div class="description">Вкажіть кількість осіб, на яке робите замовлення</div>
                                <div class="thumb-input-number">
                                    <button type="button" (click)="cutCount(false)" class="decrement">-</button>
                                    <input id="things-count" class="product-qty" [value]="cutleryCount" readonly=""
                                        tabindex="-1" data-min="0">
                                    <button type="button" (click)="cutCount(true)" class="increment">+</button>
                                </div>
                                <div class="price-wrap">
                                    <b>Безкоштовно</b>
                                </div>
                            </div>
                        </div>

                        <div class="checkbox-entry-wrap">
                            <label class="checkbox-entry">
                                <input (change)="setCutlery()" type="checkbox" name="without_things">
                                <span>Без приборів та серветок, з любов'ю до навколишнього середовища</span>
                            </label>
                        </div>
                        <div class="checkbox-entry-wrap with-title">
                            <div class="h5 content-title">Обери пакет</div>
                            <label class="checkbox-entry">
                                <input type="radio" class="toggle-block-control" name="bag" value="free"
                                    (change)="setBag('bag')" checked="">
                                <span>безкоштовний пакет</span>
                            </label>
                            <br><br>
                            <label class="checkbox-entry">
                                <input type="radio" class="toggle-block-control" name="bag" value="shopper"
                                    (change)="setBag('shoper')" data-price="10">
                                <span>брендований шопер по собівартості - 10 грн</span>
                            </label>
                        </div>

                    </div>

                    <div class="form-part">
                            <div class="h5 form-title"><b>3.</b> Інформація про оплату</div>

                            <div class="pay-block">
                                <div class="checkbox-entry-wrap">
                                    <label class="checkbox-entry">
                                        <input type="radio" (change)="payMeth(true)" id="payment_method_cod"
                                            (click)="setPay('cash')" checked class="toggle-block-control" data-block="2"
                                            data-rel="cod" name="payment_method" value="cod">
                                        <span>Оплата готівкою</span>
                                    </label>
                                </div>
                                <div class="toggle-block" *ngIf="cash" data-block="2" data-rel="cod"
                                    style="display: block;">
                                    <div class="moneychange-input">
                                        <div class="text">Решта з</div>
                                        <input class="input" type="number" placeholder="Сума" name="user_sum"
                                            formControlName="remain">
                                        <label class="checkbox-entry checkbox">
                                            <input type="checkbox" name="without_rest" (click)="rest()"><span>Без
                                                решти</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="checkbox-entry-wrap">
                                    <label class="checkbox-entry">
                                        <input type="radio" (change)="payMeth(false)" id="payment_method_liqpay"
                                            class="toggle-block-control" data-block="2" data-rel="liqpay"
                                            (click)="setPay('LiqPay')" name="payment_method" value="liqpay">
                                        <span>Онлайн оплата LiqPay</span>
                                    </label>
                                </div>
                                <div class="checkbox-entry-wrap">
                                    <label class="checkbox-entry">
                                        <input type="radio" (change)="payMeth(false)" id="payment_method_bacs"
                                            class="toggle-block-control" data-block="2" data-rel="bacs"
                                            (click)="setPay('terminal')" name="payment_method" value="bacs">
                                        <span>Оплата через термінал</span>
                                    </label>
                                </div>
                            </div>

                            <div class="checkbox-entry-wrap no_call_me"
                                *ngIf="this.order.get('payment')?.value == 'LiqPay'">
                                <label class="checkbox-entry">
                                    <input type="checkbox" name="no_call"><span>Мені можна не телефонувати для
                                        підтвердження
                                        замовлення</span>
                                </label>
                            </div>

                            <div class="checkbox-entry-wrap qqq">
                                <label class="checkbox-entry">
                                    <input type="checkbox" (change)="com()" name="is_comment"
                                        class="toggle-block-control" data-block="3" data-rel="0">
                                    <span>Коментар / промокод / інше</span>
                                </label>
                            </div>
                            <div class="toggle-block" *ngIf="comment" data-block="3" data-rel="0">
                                <textarea name="comment" formControlName="comment" maxlength="499" class="input"
                                    placeholder="Ваш коментар"></textarea>
                            </div>
                    </div>

                    <div class="order-wrap">

                        <div class="deliveryWarning">
                            <div *ngIf="false" class="errorMsg empty-address">
                                Введіть Вашу адресу та номер будинку </div>

                        </div>


                        <div class="main-order-wrapp">
                            <div class="price-wrapp">
                                <div class="main-price">
                                    <div class="h5 title">Сума:</div>
                                    <div class="all-product-price h5">
                                        <span><b class="all-product-price-el" data-total="478">{{total}}</b> грн</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <button type="submit" [disabled]="order.invalid || contacts.invalid || adressForm.invalid"
                            class="btn btn-primary btn-block main-order-button">оформити
                            замовлення</button>

                    </div>
                </div>
            </form>

            </div>
        </div>
    </form>
    <div style="height: 80px;"></div>
</div>